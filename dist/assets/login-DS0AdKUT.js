import{u as f,r as n,A as g,j as e,L as b,$ as j,y as i}from"./index-BvLg1fWM.js";import{H as N}from"./Helmet-BZH04Yzz.js";import{a as w}from"./api-sjr0-pHH.js";import{c as v,a as l,u as y}from"./index.esm-QEcpd-Ep.js";function C(){const d=f(),{setAdminToken:m}=n.useContext(g),[t,a]=n.useState(!1);async function c(x){try{a(!0);let{data:r}=await w.post("/api/admin/login",x);i.success("تم تسجيل الدخول بنجاح"),sessionStorage.setItem("AdminLogin",r.data.admin),sessionStorage.setItem("AdminRole",r.data.role);const o=new Date().getTime()+2*60*60*1e3;sessionStorage.setItem("AdminTokenExpire",o),m(o),a(!1),d("/admin-dashboard",{replace:!0})}catch{i.error("حدث خطأ أثناء تسجيل الدخول!"),a(!1)}}const u=/^(010|011|012|015)[0-9]{8}$/,h=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\W).{6,}$/;let p=v({userName:l().matches(u,"رقم الهاتف غير صالح، يجب أن يكون مصريًا").required("رقم الهاتف مطلوب"),password:l().matches(h,"كلمة المرور يجب أن تحتوي على حرف كبير، حرف صغير، وحرف خاص، ولا تقل عن 6 أحرف").required("كلمة المرور مطلوبة")});const s=y({initialValues:{userName:"",password:""},validationSchema:p,onSubmit:c});return t?e.jsx(b,{}):e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx("title",{children:"تسجيل دخول المسؤول"})}),e.jsx("section",{className:"login",children:e.jsx("div",{className:"container my-5 py-5",children:e.jsx("div",{className:"row justify-content-center p-3 my-4",children:e.jsxs("div",{className:"col-md-6 p-4 shadow-sm",children:[e.jsx("h3",{className:"text-center mb-4",children:"تسجيل الدخول"}),e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"userName",className:"form-label fw-bold",children:"رقم الهاتف :"}),e.jsx("input",{className:"form-control",placeholder:"أدخل رقم هاتفك",style:{textAlign:"right",direction:"rtl"},id:"userName",name:"userName",value:s.values.userName,onChange:s.handleChange,onBlur:s.handleBlur}),s.errors.userName&&s.touched.userName?e.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:s.errors.userName}):""]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label fw-bold",children:"كلمة المرور :"}),e.jsx("input",{type:"password",className:"form-control",placeholder:"أدخل كلمة المرور",id:"password",name:"password",value:s.values.password,onChange:s.handleChange,onBlur:s.handleBlur}),s.errors.password&&s.touched.password?e.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:s.errors.password}):""]}),e.jsx("button",{type:"submit",className:"btn rounded-0 w-100 d-flex justify-content-center",disabled:!(s.isValid&&s.dirty),children:t?e.jsx(j,{height:"20",width:"50",color:"#fff",ariaLabel:"bars-loading",visible:!0}):"تسجيل الدخول"})]})]})})})})]})}export{C as default};
