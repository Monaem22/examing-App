import{r as d,j as s,L as j,f as N,y as m}from"./index-BU-rm2uI.js";import{H as g}from"./Helmet-CYjTrV5H.js";import{a as p}from"./api-DTyocR7z.js";import{I as f}from"./index-mYDvtZSz.js";function v(){const[n,c]=d.useState(!1),[e,x]=d.useState(null);async function o(){const a=sessionStorage.getItem("StudentDegreesCode"),i=sessionStorage.getItem("StudentExamCode");if(!a||!i){m.error("بيانات الامتحان غير متوفرة، الرجاء العودة للصفحة السابقة.");return}try{c(!0);let{data:t}=await p.get(`/api/exam/exam-details/${a}/${i}`);x(t.data),m.success("تم جلب تفاصيل الامتحان بنجاح."),c(!1)}catch{m.error("حدث خطأ أثناء جلب تفاصيل الامتحان."),c(!1)}}return d.useEffect(()=>{o()},[]),n?s.jsx(j,{}):s.jsxs(s.Fragment,{children:[s.jsx(g,{children:s.jsx("title",{children:"تفاصيل الامتحان"})}),s.jsx("section",{className:"exam-details my-5 py-3",children:s.jsxs("div",{className:"container",children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center my-3",children:[s.jsx("h5",{className:"fw-bold dash-header mt-2",children:"تفاصيل الامتحان :"}),s.jsx(N,{to:"/exam-degrees",className:"redirect-link",children:s.jsxs("button",{className:"btn px-4 rounded-0 fs-6",children:["الرجوع الى درجات الطالب المحدد"," ",s.jsx(f,{size:18,className:"mx-2"})]})})]}),e?s.jsxs("div",{className:"card p-3 shadow-sm rounded-3 mt-4",children:[s.jsx("div",{className:"card-header text-white fw-bold main-bg",children:e.exam.title}),s.jsxs("ul",{className:"list-group list-group-flush",children:[s.jsxs("li",{className:"list-group-item",children:[s.jsx("strong",{className:"text-muted",children:"📜 الوصف:"})," ",e.exam.description]}),s.jsxs("li",{className:"list-group-item",children:[s.jsx("strong",{className:"text-muted",children:"📅 التاريخ:"})," ",e.exam.date]}),s.jsxs("li",{className:"list-group-item",children:[s.jsx("strong",{className:"text-muted",children:"⏰ الوقت:"})," ",e.exam.time]}),s.jsxs("li",{className:"list-group-item",children:[s.jsx("strong",{className:"text-muted",children:"⌛ المدة:"})," ",e.exam.duration]}),s.jsxs("li",{className:"list-group-item",children:[s.jsx("strong",{className:"text-muted",children:"❓ عدد الأسئلة:"})," ",e.exam.totalQuestions]}),s.jsxs("li",{className:"list-group-item",children:[s.jsx("strong",{className:"text-muted",children:"🔢 كود الامتحان:"})," ",e.exam.examCode]}),s.jsxs("li",{className:"list-group-item",children:[s.jsx("strong",{className:"text-muted",children:"🏆 الدرجة:"})," ",e.score]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h5",{className:"fw-bold",children:"📌 الأسئلة:"}),e.exam.questions.map((a,i)=>s.jsxs("div",{className:"mt-3 p-3 exam-details-questions rounded",children:[s.jsxs("h6",{className:"fw-bold main-bg p-2 text-white",children:[i+1,". ",a.question_title]}),s.jsx("ul",{className:"list-unstyled mt-2",children:a.subQuestions.map((t,u)=>{const l=e.detailedAnswers.find(r=>r.questionId===t._id);return s.jsxs("li",{className:"mb-2 list-questions",children:[s.jsxs("strong",{className:"text-muted",children:[i+1,".",u+1," ",t.questionText]}),s.jsx("ul",{className:"mt-1",children:t.options.map((r,h)=>s.jsxs("li",{className:`ms-3 ${r===t.correctAnswer?"text-success fw-bold":""}`,children:["- ",r]},h))}),s.jsxs("p",{className:"mt-2 text-success fw-bold",children:["✅ الإجابة الصحيحة: ",t.correctAnswer]}),s.jsxs("p",{className:`mt-2 fw-bold ${l!=null&&l.isCorrect?"text-success":"text-danger"}`,children:["🎯 إجابة الطالب:"," ",l?l.studentAnswer:"لم يتم الإجابة"]})]},t._id)})})]},a._id))]})]}):s.jsx("div",{className:"text-center text-danger fw-bold mt-3",children:s.jsx("p",{children:"لم يتم العثور على تفاصيل الامتحان."})})]})})]})}export{v as default};
