import{r as t,A as g,j as e,L as N,f as l,g as w,h as v,s as y,y as i}from"./index-BvLg1fWM.js";import{H as S}from"./Helmet-BZH04Yzz.js";import{a as b}from"./api-sjr0-pHH.js";import{I as C}from"./index-Ci69w3Nc.js";function k(){const{studentCode:L,setStudentCode:o}=t.useContext(g),[m,a]=t.useState(!1),[r,x]=t.useState([]),[c,h]=t.useState(""),[n,u]=t.useState("");async function j(){try{a(!0);let{data:s}=await b.get("/api/user/all-students");i.success("تم جلب بيانات الطلاب بنجاح."),x(s.data),a(!1)}catch{i.error("حدثت مشكلة أثناء جلب بيانات الطلاب!"),a(!1)}}function f(s){o(s),sessionStorage.setItem("StudentDegreesCode",s)}t.useEffect(()=>{j()},[]);const d=r.filter(s=>(n===""||s.grade===n)&&s.name.toLowerCase().includes(c.toLowerCase()));return m?e.jsx(N,{}):e.jsxs(e.Fragment,{children:[e.jsx(S,{children:e.jsx("title",{children:"درجات الطلاب"})}),e.jsx("section",{className:"students my-5 py-3",children:e.jsxs("div",{className:"container mt-2",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[e.jsx("h5",{className:"fw-bold dash-header mt-3",children:"🎓درجات جميع الطلاب :"}),e.jsx(l,{to:"/admin-dashboard",className:"redirect-link",children:e.jsxs("button",{className:"btn px-4 rounded-0 fs-6",children:["الرجوع الى لوحه التحكم",e.jsx(C,{size:18,className:"mx-2"})]})})]}),e.jsxs("div",{className:"d-flex gap-3 my-4",children:[e.jsxs("div",{className:"input-group w-50",children:[e.jsx("span",{className:"input-group-text bg-white search-icons",children:e.jsx(w,{className:"text-muted"})}),e.jsx("input",{type:"text",className:"form-control rounded-0",placeholder:"ابحث عن طالب بالاسم...",value:c,onChange:s=>h(s.target.value)})]}),e.jsxs("select",{className:"form-select w-50",value:n,onChange:s=>u(s.target.value),children:[e.jsx("option",{value:"",children:"اختر الصف"}),[...new Set(r.map(s=>s.grade))].map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx("div",{className:"row",children:d.length>0?d.map((s,p)=>e.jsx("div",{className:"col-lg-4 mb-4",onClick:()=>f(s.studentCode),children:e.jsxs("div",{className:"card p-4 shadow-md",children:[e.jsx("span",{children:p+1}),e.jsx("div",{className:"card-header rounded-circle mx-auto d-flex justify-content-center align-items-center mb-3",style:{width:"60px",height:"60px"},children:e.jsx(v,{size:30})}),e.jsxs("div",{className:"card-details",children:[e.jsxs("p",{className:"h6 fw-bold my-4",children:["كود الطالب:",e.jsx("strong",{className:"me-1 fw-medium",children:s.studentCode})]}),e.jsxs("p",{className:"h6 fw-bold my-4",children:["الاسم:",e.jsx("strong",{className:"me-1 fw-medium",children:s.name})]}),e.jsxs("p",{className:"h6 fw-bold",children:["الصف:",e.jsx("strong",{className:"me-1 fw-medium",children:s.grade})]})]}),e.jsx(l,{to:"/exam-degrees",className:"d-flex justify-content-center text-decoration-none",children:e.jsxs("button",{className:"btn d-flex align-items-center justify-content-center mt-3 gap-2 rounded-0 w-100",children:["عرض درجات الامتحانات",e.jsx(y,{})]})})]})},s._id)):e.jsx("div",{className:"col-12 text-center primary-color fw-bold",children:e.jsx("p",{children:"لا يوجد درجات لعرضها"})})})]})})]})}export{k as default};
