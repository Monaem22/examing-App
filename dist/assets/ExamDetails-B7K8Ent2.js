import{r as o,A as L,j as e,L as M,f as $,k as F,y as c}from"./index-BvLg1fWM.js";import{H}from"./Helmet-BZH04Yzz.js";import{a as S}from"./api-sjr0-pHH.js";import{I}from"./index-Ci69w3Nc.js";function R(){var E;const{examId:r,setExamId:f}=o.useContext(L),[T,u]=o.useState(!1),[t,m]=o.useState(null),[x,b]=o.useState(""),[h,g]=o.useState(""),[j,v]=o.useState(""),[p,w]=o.useState(""),[N,y]=o.useState("");o.useEffect(()=>{const s=sessionStorage.getItem("ExamId");!r&&s&&f(s)},[r,f]);async function A(){if(r)try{u(!0);let{data:s}=await S.get(`/api/exam/get-exam/${r}`);c.success("ØªÙ… Ø¬Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­."),m(s.data),u(!1)}catch{c.error("Ø­Ø¯Ø«Øª Ù…Ø´ÙƒÙ„Ø© Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†!"),u(!1)}}o.useEffect(()=>{A()},[r]);function D(){b(t.title),g(t.description),v(t.date),w(t.time),y(t.duration)}async function _(){if(r)try{await S.put(`/api/exam/update-exam/${r}`,{title:x,description:h,date:j,time:p,duration:N,questions:t.questions}),m(s=>({...s,title:x,description:h,date:j,time:p,duration:N,questions:s.questions})),c.success("ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­.")}catch(s){if(console.error("Error updating exam:",s),s.response){const n=s.response.data.message;n.includes("Ù‡Ø°Ø§ Ø§Ù„ÙˆÙ‚Øª Ù…Ù† Ø§Ù„Ù…Ø§Ø¶ÙŠ Ø§Ø¬Ø¹Ù„Ù‡ ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„")?c.error("ÙˆÙ‚Øª Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† ØºÙŠØ± ØµØ­ÙŠØ­ØŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ ÙˆÙ‚Øª ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„!"):n.includes("exams_table validation failed: questions.1.subQuestions.2.questionText")?c.error("Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† ÙˆØ¨Ù‡ Ø®Ø§Ù†Ø§Øª ÙØ§Ø±ØºØ©!"):c.error("Ø­Ø¯Ø«Øª Ù…Ø´ÙƒÙ„Ø© Ø£Ø«Ù†Ø§Ø¡ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ØŒ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ø³Ø£Ù„Ø© Ø§Ù„Ù…Ø¹Ø¯Ù„Ø©!")}else c.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª!")}}return T?e.jsx(M,{}):e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx("title",{children:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†"})}),e.jsx("section",{className:"exam-details my-5 py-4",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"d-flex justify-content-center mt-2 mb-3",children:e.jsx($,{to:"/all-exams",className:"redirect-link",children:e.jsxs("button",{className:"btn px-4 rounded-0 fs-6",children:["Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø§Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª",e.jsx(I,{size:18,className:"mx-2"})]})})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"fw-bold mt-4 dash-header",children:"ğŸ“š ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† :"}),e.jsxs("button",{className:"btn d-flex align-items-center justify-content-center gap-1 mt-2 rounded-0","data-bs-toggle":"modal","data-bs-target":"#updateExamModal",onClick:D,children:["ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†",e.jsx(F,{})]})]}),t?e.jsxs("div",{className:"card p-3 shadow-sm rounded-3 mt-4",children:[e.jsx("div",{className:"card-header text-white fw-bold main-bg",children:t.title}),e.jsxs("ul",{className:"list-group list-group-flush",children:[e.jsxs("li",{className:"list-group-item",children:[e.jsx("strong",{className:"text-muted",children:"ğŸ“œ Ø§Ù„ÙˆØµÙ:"})," ",t.description]}),e.jsxs("li",{className:"list-group-item",children:[e.jsx("strong",{className:"text-muted",children:"ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®:"})," ",t.date]}),e.jsxs("li",{className:"list-group-item",children:[e.jsx("strong",{className:"text-muted",children:"â° Ø§Ù„ÙˆÙ‚Øª:"})," ",t.time]}),e.jsxs("li",{className:"list-group-item",children:[e.jsx("strong",{className:"text-muted",children:"âŒ› Ø§Ù„Ù…Ø¯Ø©:"})," ",t.duration]}),e.jsxs("li",{className:"list-group-item",children:[e.jsx("strong",{className:"text-muted",children:"â“ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©:"})," ",t.totalQuestions]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"fw-bold",children:"ğŸ“Œ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©:"}),t.questions.map((s,n)=>e.jsxs("div",{className:"mt-3 p-3 exam-details-questions rounded",children:[e.jsxs("h6",{className:"fw-bold main-bg p-2 text-white",children:[n+1,". ",s.question_title]}),e.jsx("ul",{className:"list-unstyled mt-2",children:s.subQuestions.map((l,d)=>e.jsxs("li",{className:"mb-2 list-questions",children:[e.jsxs("strong",{className:"text-muted",children:[n+1,".",d+1," ",l.questionText]}),e.jsx("ul",{className:"mt-1",children:l.options.map((i,a)=>e.jsxs("li",{className:`ms-3 ${i===l.correctAnswer?"text-success fw-bold":""}`,children:["- ",i]},a))}),e.jsxs("p",{className:"mt-2 text-success fw-bold",children:["âœ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: ",l.correctAnswer]})]},l._id))})]},s._id))]})]}):e.jsx("div",{className:"text-center text-danger fw-bold mt-3",children:e.jsx("p",{children:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†."})})]})}),e.jsx("div",{className:"modal fade",id:"updateExamModal",tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header d-flex justify-content-between",children:[e.jsx("button",{type:"button",className:"btn-close ms-auto","data-bs-dismiss":"modal"}),e.jsx("h5",{className:"modal-title",children:"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("label",{className:"form-label",children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†:"}),e.jsx("input",{type:"text",className:"form-control",value:x,onChange:s=>b(s.target.value)}),e.jsx("label",{className:"form-label mt-3",children:"ÙˆØµÙ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†:"}),e.jsx("input",{className:"form-control",value:h,onChange:s=>g(s.target.value)}),e.jsx("label",{className:"form-label mt-3",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†:"}),e.jsx("input",{type:"text",className:"form-control",value:j,onChange:s=>v(s.target.value)}),e.jsx("label",{className:"form-label mt-3",children:"ÙˆÙ‚Øª Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†:"}),e.jsx("input",{type:"text",className:"form-control",value:p,onChange:s=>w(s.target.value)}),e.jsx("label",{className:"form-label mt-3",children:"Ù…Ø¯Ø© Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†:"}),e.jsx("input",{type:"text",className:"form-control",value:N,onChange:s=>y(s.target.value)}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"fw-bold",children:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©:"}),(E=t==null?void 0:t.questions)==null?void 0:E.map((s,n)=>e.jsxs("div",{className:"mt-3 p-3 exam-details-questions rounded",children:[e.jsxs("h6",{className:"fw-bold main-bg p-2 text-white",children:[n+1,". ",s.question_title]}),s.subQuestions.map((l,d)=>e.jsxs("div",{className:"mt-3 p-2 border rounded",children:[e.jsx("label",{className:"form-label mt-2 fw-bold",children:"Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„:"}),e.jsx("input",{type:"text",className:"form-control my-2",placeholder:"Ø£Ø¯Ø®Ù„ Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„",value:l.questionText||"",onChange:i=>{const a=[...t.questions];a[n].subQuestions[d].questionText=i.target.value,m({...t,questions:a})}}),e.jsxs("div",{className:"my-3",children:[e.jsx("label",{className:"fw-bold",children:"Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª :"}),e.jsx("div",{className:"row",children:l.options.map((i,a)=>e.jsx("div",{className:"col-4",children:e.jsx("input",{type:"text",className:"form-control my-2",placeholder:`Ø§Ø®ØªÙŠØ§Ø± ${a+1}`,value:i,onChange:k=>{const q=[...l.options];q[a]=k.target.value;const C=[...t.questions];C[n].subQuestions[d].options=q,m({...t,questions:C})}})},a))})]}),e.jsxs("div",{className:"my-3",children:[e.jsx("label",{className:"fw-bold",children:"Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© :"}),e.jsxs("select",{className:"form-select my-2",value:l.correctAnswer||"",onChange:i=>{const a=[...t.questions];a[n].subQuestions[d].correctAnswer=i.target.value,m({...t,questions:a})},children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©"}),l.options.map((i,a)=>e.jsx("option",{value:i,children:i},a))]})]})]},d))]},s._id))]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn rounded-0","data-bs-dismiss":"modal",children:"Ø¥ØºÙ„Ø§Ù‚"}),e.jsx("button",{type:"button",className:"btn rounded-0",onClick:_,"data-bs-dismiss":"modal",children:"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª"})]})]})})})]})}export{R as default};
