import{G as v,r as t,j as e,L as y,f as w,n as A,i as k,k as S,l as C,y as l}from"./index-BU-rm2uI.js";import{H as E}from"./Helmet-CYjTrV5H.js";import{a as x}from"./api-DTyocR7z.js";import{I as F}from"./index-mYDvtZSz.js";import{l as _}from"./react-confirm-alert-C6ltwXRs.js";function z(d){return v({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1a110.96 110.96 0 0 0-79.1-32.8zm412.3 235.5l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9a32.03 32.03 0 0 0 9.3-35.2l-.9-2.6a442.5 442.5 0 0 0-79.6-137.7l-1.8-2.1a32.12 32.12 0 0 0-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9a32.05 32.05 0 0 0-25.8-25.7l-2.7-.5c-52-9.4-106.8-9.4-158.8 0l-2.7.5a32.05 32.05 0 0 0-25.8 25.7l-15.8 85.3a353.44 353.44 0 0 0-98.9 57.3l-81.8-29.1a32 32 0 0 0-35.1 9.5l-1.8 2.1a445.93 445.93 0 0 0-79.6 137.7l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5a32.03 32.03 0 0 0-9.3 35.2l.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1a32.12 32.12 0 0 0 35.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3a32.05 32.05 0 0 0 25.8 25.7l2.7.5a448.27 448.27 0 0 0 158.8 0l2.7-.5a32.05 32.05 0 0 0 25.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9a32 32 0 0 0 35.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l.9-2.6c4.3-12.4.6-26.3-9.5-35zm-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z"},child:[]}]})(d)}function $(){const[d,i]=t.useState(!1),[u,r]=t.useState([]),[o,h]=t.useState(null),[c,j]=t.useState(""),[m,p]=t.useState("");async function f(){try{i(!0);let{data:s}=await x.get("/api/admin/all-admin");l.success("تم جلب البيانات بنجاح."),r(s.data),i(!1)}catch{l.error("حدثت مشكلة أثناء جلب البيانات !"),i(!1)}}async function b(s){_.confirmAlert({title:"تأكيد الحذف",message:"هل أنت متأكد من أنك تريد حذف هذا المسؤول؟",buttons:[{label:"نعم",className:"confirm-delete-btn",onClick:async()=>{try{await x.delete(`/api/admin/${s}`),r(a=>a.filter(n=>n._id!==s)),l.success("تم حذف المسؤول بنجاح.")}catch{l.error("حدثت مشكلة أثناء محاولة حذف المسؤول!")}}},{label:"إلغاء",className:"confirm-cancel-btn",onClick:()=>console.log("تم الإلغاء")}]})}function N(s){h(s),j(s.userName),p(s.role)}async function g(){if(!o)return;if(!/^(010|011|012|015)[0-9]{8}$/.test(c)){l.error("رقم الهاتف غير صالح، يجب أن يكون رقم هاتف مصرى صالح.");return}try{await x.patch(`/api/admin/update/${o._id}`,{userName:c,role:m}),r(a=>a.map(n=>n._id===o._id?{...n,userName:c,role:m}:n)),l.success("تم تعديل المسؤول بنجاح."),h(null)}catch{l.error("حدثت مشكلة أثناء محاولة التعديل!")}}return t.useEffect(()=>{f()},[]),d?e.jsx(y,{}):e.jsxs(e.Fragment,{children:[e.jsx(E,{children:e.jsx("title",{children:"جميع المسؤولين"})}),e.jsx("section",{className:"admins my-5 py-3",children:e.jsxs("div",{className:"container mt-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h5",{className:"mt-2 fw-bold dash-header",children:"📌 جميع المسؤولين :"}),e.jsx(w,{to:"/admin-dashboard",className:"redirect-link",children:e.jsxs("button",{className:"btn px-4 rounded-0 fs-6",children:["الرجوع الى لوحه التحكم"," ",e.jsx(F,{size:18,className:"mx-2"})]})})]}),e.jsx("div",{className:"row",children:u.length>0?u.map((s,a)=>e.jsx("div",{className:"col-lg-4 mb-4",children:e.jsxs("div",{className:"card p-4 shadow-md",children:[e.jsx("span",{children:a+1}),e.jsx("div",{className:"card-header rounded-circle mx-auto d-flex justify-content-center align-items-center mb-3",style:{width:"60px",height:"60px"},children:e.jsx(A,{size:30})}),e.jsxs("div",{className:"card-details",children:[e.jsxs("p",{className:"h6 fw-bold my-4",children:[e.jsx(k,{className:"main-color"})," رقم الهاتف :",e.jsx("strong",{className:"me-1 fw-medium",children:s.userName})]}),e.jsxs("p",{className:"h6 fw-bold",children:[e.jsx(z,{className:"main-color"})," دور المسؤول :",e.jsx("strong",{className:"me-1 fw-medium",children:s.role})]})]}),e.jsxs("div",{className:"card-buttons mt-3 d-flex justify-content-between gap-3 card-details pt-4",children:[e.jsxs("button",{className:"btn d-flex align-items-center gap-1 rounded-0","data-bs-toggle":"modal","data-bs-target":"#updateAdminModal",onClick:()=>N(s),children:["تعديل ",e.jsx(S,{})]}),e.jsxs("button",{className:"btn bg-danger d-flex align-items-center gap-1 rounded-0",onClick:()=>b(s._id),children:["حذف ",e.jsx(C,{})]})]})]})},s._id)):e.jsx("div",{className:"col-12 text-center main-color fw-bold",children:e.jsx("p",{children:"لا يوجد بيانات لعرضها "})})})]})}),e.jsx("div",{className:"modal fade",id:"updateAdminModal",tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header d-flex justify-content-between",children:[e.jsx("button",{type:"button",className:"btn-close ms-auto","data-bs-dismiss":"modal"}),e.jsx("h5",{className:"modal-title",children:"تعديل بيانات المسؤول"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("label",{className:"form-label",children:"اسم المستخدم:"}),e.jsx("input",{type:"text",className:"form-control",value:c,onChange:s=>j(s.target.value)}),e.jsx("label",{className:"form-label mt-3",children:"دور المسؤول:"}),e.jsxs("select",{className:"form-select",value:m,onChange:s=>p(s.target.value),children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"اختر الدور"}),e.jsx("option",{value:"admin",children:"مسؤول إدارة"}),e.jsx("option",{value:"user",children:"مسؤول الطلاب"}),e.jsx("option",{value:"exams",children:"مسؤول امتحانات"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn rounded-0","data-bs-dismiss":"modal",children:"إغلاق"}),e.jsx("button",{type:"button",className:"btn rounded-0",onClick:g,"data-bs-dismiss":"modal",children:"حفظ التعديلات"})]})]})})})]})}export{$ as default};
