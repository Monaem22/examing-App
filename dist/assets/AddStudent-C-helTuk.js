import{r as m,j as e,L as u,f as h,$ as b,y as n}from"./index-BvLg1fWM.js";import{H as p}from"./Helmet-BZH04Yzz.js";import{a as x}from"./api-sjr0-pHH.js";import{c as j,a as r,u as g}from"./index.esm-QEcpd-Ep.js";import{I as f}from"./index-Ci69w3Nc.js";function G(){const[t,s]=m.useState(!1);async function i(c){try{s(!0);let{data:a}=await x.post("/api/user/add-student",c);n.success("تم إضافة الطالب بنجاح"),s(!1),console.log(a.type)}catch(a){s(!1),a.response&&a.response.data.message.includes("E11000 duplicate key error")?n.warning("رقم الهاتف مستخدم بالفعل! الرجاء استخدام رقم آخر."):n.error("حدث خطأ أثناء إضافة الطالب!")}}const d=/^(010|011|012|015)[0-9]{8}$/;let o=j({name:r().required("اسم الطالب مطلوب"),grade:r().required("الصف مطلوب"),studentMobile:r().matches(d,"رقم الهاتف غير صالح، يجب أن يكون مصريًا").required("رقم الهاتف مطلوب"),parentMobile:r().matches(d,"رقم الهاتف غير صالح، يجب أن يكون مصريًا").required("رقم هاتف ولي الأمر مطلوب")});const l=g({initialValues:{name:"",grade:"",studentMobile:"",parentMobile:""},validationSchema:o,onSubmit:i});return t?e.jsx(u,{}):e.jsxs(e.Fragment,{children:[e.jsx(p,{children:e.jsx("title",{children:"إضافة طالب"})}),e.jsx("section",{className:"my-5 py-5 add-student",children:e.jsxs("div",{className:"container mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{className:"fw-bold mb-2 dash-header",children:"إضافة طالب جديد :"}),e.jsx(h,{to:"/admin-dashboard",className:"redirect-link",children:e.jsxs("button",{className:"btn px-4 rounded-0 fs-6",children:["الرجوع الى لوحه التحكم"," ",e.jsx(f,{size:18,className:"mx-2"})]})})]}),e.jsxs("form",{onSubmit:l.handleSubmit,children:[e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"name",className:"form-label fw-bold",children:"اسم الطالب :"}),e.jsx("input",{type:"text",className:"form-control mb-3",id:"name",placeholder:"أدخل اسم الطالب",value:l.values.name,onChange:l.handleChange,onBlur:l.handleBlur,style:{textAlign:"right",direction:"rtl"}}),l.errors.name&&l.touched.name?e.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:l.errors.name}):""]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"grade",className:"form-label fw-bold",children:"الصف :"}),e.jsxs("select",{id:"grade",name:"grade",className:"form-select",value:l.values.grade,onChange:l.handleChange,onBlur:l.handleBlur,children:[e.jsx("option",{value:"",disabled:!0,hidden:!0,children:"اختر الصف"}),e.jsxs("optgroup",{label:"المرحلة الابتدائية",children:[e.jsx("option",{value:"G4",children:"الصف الرابع الابتدائي"}),e.jsx("option",{value:"G5",children:"الصف الخامس الابتدائي"}),e.jsx("option",{value:"G6",children:"الصف السادس الابتدائي"})]}),e.jsxs("optgroup",{label:"المرحلة الإعدادية",children:[e.jsx("option",{value:"G7",children:"الصف الأول الإعدادي"}),e.jsx("option",{value:"G8",children:"الصف الثاني الإعدادي"}),e.jsx("option",{value:"G9",children:"الصف الثالث الإعدادي"})]}),e.jsxs("optgroup",{label:"المرحلة الثانوية",children:[e.jsx("option",{value:"G10",children:"الصف الأول الثانوي"}),e.jsx("option",{value:"G11",children:"الصف الثاني الثانوي"}),e.jsx("option",{value:"G12",children:"الصف الثالث الثانوي"})]})]}),l.errors.grade&&l.touched.grade?e.jsx("div",{className:"alert alert-danger p-2 my-3 rounded-0",children:l.errors.grade}):""]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"studentMobile",className:"form-label fw-bold",children:"رقم الهاتف :"}),e.jsx("input",{type:"tel",className:"form-control mb-3",id:"studentMobile",placeholder:"أدخل رقم هاتف الطالب",value:l.values.studentMobile,onChange:l.handleChange,onBlur:l.handleBlur,style:{textAlign:"right",direction:"rtl"}}),l.errors.studentMobile&&l.touched.studentMobile?e.jsx("div",{className:"alert alert-danger p-2 my-3 rounded-0",children:l.errors.studentMobile}):""]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"parentMobile",className:"form-label fw-bold",children:"رقم هاتف ولي الأمر :"}),e.jsx("input",{type:"tel",className:"form-control",id:"parentMobile",placeholder:"أدخل رقم هاتف ولي الأمر",value:l.values.parentMobile,onChange:l.handleChange,onBlur:l.handleBlur,style:{textAlign:"right",direction:"rtl"}}),l.errors.parentMobile&&l.touched.parentMobile?e.jsx("div",{className:"alert alert-danger p-2 my-3 rounded-0",children:l.errors.parentMobile}):""]})]}),e.jsx("button",{type:"submit",className:"btn mt-3 py-2 rounded-0",disabled:!(l.isValid&&l.dirty),children:t?e.jsx(b,{height:"20",width:"50",color:"#fff",ariaLabel:"bars-loading",visible:!0}):"إضافة الطالب"})]})]})})]})}export{G as default};
