import{r as a,j as e,L as E,f as F,g as _,h as A,i as w,k as I,l as P,y as t}from"./index-BU-rm2uI.js";import{H as T}from"./Helmet-CYjTrV5H.js";import{a as x}from"./api-DTyocR7z.js";import{I as U}from"./index-mYDvtZSz.js";import{l as $}from"./react-confirm-alert-C6ltwXRs.js";function D(){const[v,d]=a.useState(!1),[h,i]=a.useState([]),[p,y]=a.useState(""),[o,S]=a.useState(""),[m,j]=a.useState(null),[u,b]=a.useState(""),[r,f]=a.useState(""),[c,N]=a.useState(""),M={G4:"Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",G5:"Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",G6:"Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ",G7:"Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ",G8:"Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ",G9:"Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ",G10:"Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ",G11:"Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ",G12:"Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ"};async function C(){try{d(!0);let{data:s}=await x.get("/api/user/all-students");t.success("ØªÙ… Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­."),i(s.data),d(!1)}catch{t.error("Ø­Ø¯Ø«Øª Ù…Ø´ÙƒÙ„Ø© Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨!"),d(!1)}}async function G(s){$.confirmAlert({title:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù",message:"Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø·Ø§Ù„Ø¨ØŸ",buttons:[{label:"Ù†Ø¹Ù…",className:"confirm-delete-btn",onClick:async()=>{try{await x.delete(`/api/user/delete-student/${s}`),i(l=>l.filter(n=>n._id!==s)),t.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­.")}catch{t.error("Ø­Ø¯Ø«Øª Ù…Ø´ÙƒÙ„Ø© Ø£Ø«Ù†Ø§Ø¡ Ù…Ø­Ø§ÙˆÙ„Ø© Ø­Ø°Ù Ø§Ù„Ø·Ø§Ù„Ø¨!")}}},{label:"Ø¥Ù„ØºØ§Ø¡",className:"confirm-cancel-btn",onClick:()=>console.log("ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡")}]})}function k(s){j(s),b(s.name),f(s.studentMobile),N(s.parentMobile)}async function L(){if(!m)return;const s=/^(010|011|012|015)[0-9]{8}$/;if(!s.test(r)){t.error("Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ ØºÙŠØ± ØµØ§Ù„Ø­ØŒ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…ØµØ±ÙŠÙ‹Ø§.");return}if(!s.test(c)){t.error("Ø±Ù‚Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± ØºÙŠØ± ØµØ§Ù„Ø­ØŒ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…ØµØ±ÙŠÙ‹Ø§.");return}try{await x.put(`/api/user/update-student/${m._id}`,{name:u,studentMobile:r,parentMobile:c}),i(l=>l.map(n=>n._id===m._id?{...n,name:u,studentMobile:r,parentMobile:c}:n)),t.success("ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­."),j(null)}catch{t.error("Ø­Ø¯Ø«Øª Ù…Ø´ÙƒÙ„Ø© Ø£Ø«Ù†Ø§Ø¡ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„!")}}if(a.useEffect(()=>{C()},[]),v)return e.jsx(E,{});const g=h.filter(s=>(o===""||s.grade===o)&&s.name.toLowerCase().includes(p.toLowerCase()));return e.jsxs(e.Fragment,{children:[e.jsx(T,{children:e.jsx("title",{children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨"})}),e.jsx("section",{className:"students my-5 py-3",children:e.jsxs("div",{className:"container mt-3",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("h5",{className:"mt-2 fw-bold dash-header",children:"ğŸ“ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø§Ø¨ :"}),e.jsx(F,{to:"/admin-dashboard",className:"redirect-link",children:e.jsxs("button",{className:"btn px-4 rounded-0 fs-6",children:["Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø§Ù„Ù‰ Ù„ÙˆØ­Ù‡ Ø§Ù„ØªØ­ÙƒÙ…"," ",e.jsx(U,{size:18,className:"mx-2"})]})})]}),e.jsxs("div",{className:"d-flex gap-3 my-4",children:[e.jsxs("div",{className:"input-group w-50",children:[e.jsx("span",{className:"input-group-text bg-white search-icons",children:e.jsx(_,{className:"text-muted"})}),e.jsx("input",{type:"text",className:"form-control rounded-0",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø§Ù„Ø¨ Ø¨Ø§Ù„Ø§Ø³Ù…...",value:p,onChange:s=>y(s.target.value)})]}),e.jsxs("select",{className:"form-select w-50",value:o,onChange:s=>S(s.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„ØµÙ"}),[...new Set(h.map(s=>s.grade))].map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx("div",{className:"row",children:g.length>0?g.map((s,l)=>e.jsx("div",{className:"col-lg-4 mb-4",children:e.jsxs("div",{className:"card p-4 shadow-md",children:[e.jsx("span",{children:l+1}),e.jsx("div",{className:"card-header rounded-circle mx-auto d-flex justify-content-center align-items-center mb-3",style:{width:"60px",height:"60px"},children:e.jsx(A,{size:30})}),e.jsxs("div",{className:"card-details",children:[e.jsxs("p",{className:"h6 fw-bold my-4",children:["ÙƒÙˆØ¯ Ø§Ù„Ø·Ø§Ù„Ø¨:",e.jsx("strong",{className:"me-1 fw-medium",children:s.studentCode})]}),e.jsxs("p",{className:"h6 fw-bold my-4",children:["Ø§Ù„Ø§Ø³Ù…:",e.jsx("strong",{className:"me-1 fw-medium",children:s.name})]}),e.jsxs("p",{className:"h6 fw-bold",children:["Ø§Ù„ØµÙ:",e.jsx("strong",{className:"me-1 fw-medium",children:M[s.grade]||s.grade})]}),e.jsxs("p",{className:"h6 fw-bold my-4",children:[e.jsx(w,{className:"main-color"})," Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨:",e.jsx("strong",{className:"me-1 fw-medium",children:s.studentMobile})]}),e.jsxs("p",{className:"h6 fw-bold mb-3",children:[e.jsx(w,{className:"main-color"})," Ø±Ù‚Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±:",e.jsx("strong",{className:"me-1 fw-medium",children:s.parentMobile})]})]}),e.jsxs("div",{className:"card-buttons mt-3 d-flex justify-content-between gap-3 pt-4 card-details",children:[e.jsxs("button",{className:"btn d-flex align-items-center gap-1 rounded-0","data-bs-toggle":"modal","data-bs-target":"#updateStudentModal",onClick:()=>k(s),children:["ØªØ¹Ø¯ÙŠÙ„ ",e.jsx(I,{})]}),e.jsxs("button",{className:"btn bg-danger d-flex align-items-center gap-1 rounded-0",onClick:()=>G(s._id),children:["Ø­Ø°Ù ",e.jsx(P,{})]})]})]})},s._id)):e.jsx("div",{className:"col-12 text-center primary-color fw-bold",children:e.jsx("p",{children:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø¹Ø±Ø¶Ù‡Ø§"})})})]})}),e.jsx("div",{className:"modal fade",id:"updateStudentModal",tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header d-flex justify-content-between",children:[e.jsx("button",{type:"button",className:"btn-close ms-auto","data-bs-dismiss":"modal"}),e.jsx("h5",{className:"modal-title",children:"ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("label",{className:"form-label",children:"Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("input",{type:"text",className:"form-control",value:u,onChange:s=>b(s.target.value)}),e.jsx("label",{className:"form-label mt-3",children:"Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"}),e.jsx("input",{type:"text",className:"form-control",value:r,onChange:s=>f(s.target.value)}),e.jsx("label",{className:"form-label mt-3",children:"Ø±Ù‚Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±"}),e.jsx("input",{type:"text",className:"form-control",value:c,onChange:s=>N(s.target.value)})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn","data-bs-dismiss":"modal",children:"Ø¥ØºÙ„Ø§Ù‚"}),e.jsx("button",{type:"button",className:"btn",onClick:L,"data-bs-dismiss":"modal",children:"Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª"})]})]})})})]})}export{D as default};
