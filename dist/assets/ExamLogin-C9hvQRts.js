import{u,r as x,j as e,L as h,m as f,F as g,$ as C,y as s}from"./index-BU-rm2uI.js";import{H as b}from"./Helmet-CYjTrV5H.js";import{a as p}from"./api-DTyocR7z.js";import{c as j,a as o,u as v}from"./index.esm-DFs15I_E.js";function L(){const i=u(),[n,d]=x.useState(!1);async function l(c){try{d(!0);let{data:t}=await p.post("/api/exam/login-to-exam",c);sessionStorage.setItem("StudentCode",t.data.studentCode),sessionStorage.setItem("ExamCode",t.data.examCode),d(!1),i("/exam")}catch(t){if(d(!1),t.response){const r=t.response.data.message;r.includes("معاد الامتحان")?s.warning("لم يبدأ الامتحان بعد، تأكد من وقت الامتحان!"):r.includes("انتهي الامتحان")?s.error("انتهى وقت الامتحان، لا يمكنك الدخول!"):r.includes("ليس لديك القدره لإعاده الامتحان مره اخري")?s.warning("لا يمكنك إعادة الامتحان مرة أخرى!"):r.includes("هذا الامتحان غير موجود")||r.includes("ليس مسموح لك بأن تدخل هذا الامتحان")?s.error("هذا الامتحان غير موجود أو ليس مسموحًا لك بدخوله!"):s.error("حدث خطأ أثناء تسجيل الدخول، يرجى المحاولة لاحقًا!")}else s.error("حدث خطأ أثناء الاتصال بالخادم، تأكد من اتصالك بالإنترنت!")}}let m=j({studentCode:o().required("كود الطالب مطلوب"),examCode:o().required("كود الامتحان مطلوب")});const a=v({initialValues:{studentCode:"",examCode:""},validationSchema:m,onSubmit:l});return n?e.jsx(h,{}):e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsx("title",{children:"تسجيل دخول الامتحان"})}),e.jsx("section",{className:"login",children:e.jsx("div",{className:"container my-5 py-5",children:e.jsx("div",{className:"row justify-content-center p-3 my-4",children:e.jsxs(f.div,{variants:g(.3),initial:"hidden",animate:"visible",className:"col-md-6 p-4 shadow-sm",children:[e.jsx("h3",{className:"text-center mb-4",children:"تسجيل الدخول للامتحان"}),e.jsxs("form",{onSubmit:a.handleSubmit,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"studentCode",className:"form-label fw-bold",children:"كود الطالب :"}),e.jsx("input",{className:"form-control",placeholder:"أدخل كود الطالب",style:{textAlign:"right",direction:"rtl"},id:"studentCode",name:"studentCode",value:a.values.studentCode,onChange:a.handleChange,onBlur:a.handleBlur}),a.errors.studentCode&&a.touched.studentCode?e.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:a.errors.studentCode}):""]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"examCode",className:"form-label fw-bold",children:"كود الامتحان :"}),e.jsx("input",{className:"form-control",placeholder:"أدخل كود الامتحان",id:"examCode",name:"examCode",value:a.values.examCode,onChange:a.handleChange,onBlur:a.handleBlur}),a.errors.examCode&&a.touched.examCode?e.jsx("div",{className:"alert alert-danger p-2 my-2 rounded-0",children:a.errors.examCode}):""]}),e.jsx("button",{type:"submit",className:"btn rounded-0 w-100 d-flex justify-content-center",disabled:!(a.isValid&&a.dirty),children:n?e.jsx(C,{height:"20",width:"50",color:"#fff",ariaLabel:"bars-loading",visible:!0}):"تسجيل الدخول"})]})]})})})})]})}export{L as default};
